âœ¨ EarthGazer has been deployed successfully! âœ¨

ğŸ“Š To monitor Celery workers, access the Flower UI:

{{- if .Values.flower.ingress.enabled }}
{{- range $host := .Values.flower.ingress.hosts }}
  {{- range .paths }}
  ğŸŒ http{{ if $.Values.flower.ingress.tls }}s{{ end }}://{{ $host.host }}{{ .path }}
  {{- end }}
{{- end }}
{{- else if contains "NodePort" .Values.flower.service.type }}
  export NODE_PORT=$(kubectl get --namespace {{ .Release.Namespace }} -o jsonpath="{.spec.ports[0].nodePort}" services {{ include "earthgazer.fullname" . }}-flower)
  export NODE_IP=$(kubectl get nodes --namespace {{ .Release.Namespace }} -o jsonpath="{.items[0].status.addresses[0].address}")
  ğŸŒ http://$NODE_IP:$NODE_PORT
{{- else if contains "LoadBalancer" .Values.flower.service.type }}
  NOTE: It may take a few minutes for the LoadBalancer IP to be available.
        You can watch the status with:

        kubectl get --namespace {{ .Release.Namespace }} svc -w {{ include "earthgazer.fullname" . }}-flower

  export SERVICE_IP=$(kubectl get svc --namespace {{ .Release.Namespace }} {{ include "earthgazer.fullname" . }}-flower --template "{{"{{ range (index .status.loadBalancer.ingress 0) }}{{.}}{{ end }}"}}")
  ğŸŒ http://$SERVICE_IP:{{ .Values.flower.service.port }}
{{- else if contains "ClusterIP" .Values.flower.service.type }}
  ğŸ” Port-forward to access Flower locally:

  kubectl port-forward --namespace {{ .Release.Namespace }} svc/{{ include "earthgazer.fullname" . }}-flower {{ .Values.flower.service.port }}:{{ .Values.flower.service.port }}
  ğŸŒ http://localhost:{{ .Values.flower.service.port }}
{{- end }}

ğŸ“¦ Deployed Components:
  âœ“ PostgreSQL database
  âœ“ Redis message broker
{{- if .Values.workers.io.enabled }}
  âœ“ I/O workers ({{ .Values.workers.io.replicaCount }} replicas{{ if .Values.workers.io.autoscaling.enabled }}, autoscaling enabled{{ end }})
{{- end }}
{{- if .Values.workers.cpu.enabled }}
  âœ“ CPU workers ({{ .Values.workers.cpu.replicaCount }} replicas{{ if .Values.workers.cpu.autoscaling.enabled }}, autoscaling enabled{{ end }})
{{- end }}
{{- if .Values.workers.default.enabled }}
  âœ“ Default workers ({{ .Values.workers.default.replicaCount }} replicas)
{{- end }}
{{- if .Values.flower.enabled }}
  âœ“ Flower monitoring UI
{{- end }}

ğŸ’¾ Data Storage:
{{- if .Values.persistence.enabled }}
  {{- if .Values.persistence.existingClaim }}
  Using existing PVC: {{ .Values.persistence.existingClaim }}
  {{- else }}
  PVC created: {{ include "earthgazer.fullname" . }}-data ({{ .Values.persistence.size }})
  Access mode: {{ .Values.persistence.accessMode }}
  {{- end }}
{{- else }}
  âš ï¸  Using emptyDir - data will be lost on pod restart!
{{- end }}

ğŸ“‹ Useful Commands:

  # View all pods
  kubectl get pods -n {{ .Release.Namespace }} -l app.kubernetes.io/instance={{ .Release.Name }}

  # View worker logs
  kubectl logs -n {{ .Release.Namespace }} -l component=worker-io --tail=100 -f
  kubectl logs -n {{ .Release.Namespace }} -l component=worker-cpu --tail=100 -f

  # Scale workers manually
  kubectl scale deployment -n {{ .Release.Namespace }} {{ include "earthgazer.fullname" . }}-worker-io --replicas=5

  # Access the CLI
  kubectl exec -it -n {{ .Release.Namespace }} deployment/{{ include "earthgazer.fullname" . }}-worker-io -- earthgazer --help

  # Check persistent volume
  kubectl get pvc -n {{ .Release.Namespace }}

  # View HPA status
  kubectl get hpa -n {{ .Release.Namespace }}

ğŸ”§ Configuration:
  Database: {{ include "earthgazer.postgresql.host" . }}:{{ include "earthgazer.postgresql.port" . }}
  Redis: {{ include "earthgazer.redis.host" . }}:{{ include "earthgazer.redis.port" . }}
  {{- if .Values.gcloud.bucketName }}
  GCS Bucket: {{ .Values.gcloud.bucketName }}
  {{- end }}

ğŸ“š Documentation: https://github.com/yourusername/earthgazer/tree/main/helm/earthgazer

Happy satellite image processing! ğŸ›°ï¸
